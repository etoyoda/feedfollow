# 設計メモ
今は場当たり的になっているが、情報源と出力先をいろいろ交換可能にしたい。
## 情報源（候補）

### 気象庁防災情報XML Pull型提供
* 形式: XML限定
* ファイル名: UUIDに基づいてオペーク・永劫一意につけられている。

### GISC Tokyo GTS電文
* 形式: テキスト、BUFR、GRIB
* ファイル名: WMOファイル名規則 Aフォーマット
* ヘッダ抽出: 可能

### SPAS天気図
更新検知（場当たりJS解読）にちょっと開発が必要。

### JMH・metcht天気図
ファイル名固定なので真面目に考えると更新検知が難しい。

### GISC Washington TAC Reports
* 形式: テキスト/FM12,FM35など
* 更新検知: ちょっと開発が必要、5分周期
* ヘッダ抽出: 可能
* ドキュメント: https://www.weather.gov/tg/obsfiles
* ファイル名: シリアル、約5日周期で再利用

### GISC Washington METAR
* 形式: テキスト/FM15
* 更新検知: ちょっと開発が必要、5分周期
* ヘッダ抽出: 無理
* ファイル名: シリアル、約5日周期で再利用

## 出力先（候補）
### 単ファイルバラ置き
スループット（時間当たり通数）が増えると厳しいが、現状こういうのでやっているアプリがあるので。

### シーケンシャルファイルまとめ置き
取りこぼしを避けるべくリアルタイム的に動作する受信プロセスと、所要時間を見積もりにくい処理プロセスの受け渡しに、シーケンシャルファイル以上に効率的なものが思いつかない。
ファイル形式は、ペイロードが単なるオクテット列オブジェクトに加えてどんなメタデータを持つか次第であって、さしあたって tar フォーマットを使うことにする。
WMO バッチ FTP 形式にはヘッダしかメタデータがないのでファイル名が脱落してしまう。

### GDBM
とにかくポータブル。後段処理がランダムアクセスの場合に性能がよい。一方で更新通知や順番読み出しが困難。
シーケンシャルファイルとGDBMを併用することも考えられるが、その場合、リアルタイム受信プロセスからの受け渡しインターフェイスとしてはシーケンシャルファイルだけにするのだろう。

### DBMS
十分な資源を持っていないので考えない。

### PubSubHubbub
流行ると思っているわけではないが、既存サービス収容手段として期待されている。これは、後続しょりか。

# データ保存フォーマット
